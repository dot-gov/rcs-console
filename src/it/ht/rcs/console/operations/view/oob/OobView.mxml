<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
					xmlns:s="library://ns.adobe.com/flex/spark"
					xmlns:mx="library://ns.adobe.com/flex/mx"
					width="100%"
					height="100%"
					addedToStage="onAddedToStage()"
					removedFromStage="onRemovedFromStage()"
					creationComplete="init()"
					xmlns:oob="it.ht.rcs.console.operations.view.oob.*">

	<fx:Script>
		<![CDATA[
      import it.ht.rcs.console.agent.model.Agent;
      import it.ht.rcs.console.events.FilterEvent;
      import it.ht.rcs.console.events.RefreshEvent;
      import it.ht.rcs.console.evidence.controller.EvidenceManager;
      import it.ht.rcs.console.evidence.model.Evidence;
      import it.ht.rcs.console.operations.view.OperationsSection;
      import it.ht.rcs.console.operations.view.evidences.EvidenceAdvancedViewer;
      import it.ht.rcs.console.operations.view.evidences.EvidenceFileExporter;
      import it.ht.rcs.console.operations.view.evidences.ExportPopUp;
      import it.ht.rcs.console.sms.controller.SmsManager;
      import it.ht.rcs.console.utils.AlertPopUp;
      
      import locale.R;
      
      import mx.collections.ArrayCollection;
      import mx.controls.Alert;
      import mx.core.FlexGlobals;
      import mx.events.CloseEvent;
      import mx.managers.PopUpManager;
      import mx.rpc.events.ResultEvent;
      
      import spark.events.GridEvent;

			[Bindable]
			public var section:OperationsSection;

			[Bindable]
			public var dataProvider:ArrayCollection;

			private var exporter:EvidenceFileExporter;
			private var exportMonitor:ExportPopUp;

			private function onAddedToStage():void
			{

				FlexGlobals.topLevelApplication.addEventListener(RefreshEvent.REFRESH, onRefresh);
				onRefresh()

			}

			private function init():void
			{
				
			}

			private function onRemovedFromStage():void
			{
				FlexGlobals.topLevelApplication.removeEventListener(RefreshEvent.REFRESH, onRefresh);

			}


			private function onRefresh(e:Event=null):void
			{
        var agent:Agent=section.stateManager.selectedAgent;
        SmsManager.instance.all(agent, onResult);
			}
      private function onResult(e:ResultEvent):void
      {        
        dataProvider=e.result as ArrayCollection;
      }
    
		]]>
	</fx:Script>
	<oob:OobActionBar id="actionBar"
										section="{section}"/>
	<oob:OobGrid id="commandsGrid"
							 dataProvider="{dataProvider}"/>
</s:VGroup>
