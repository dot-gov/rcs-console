<?xml version="1.0" encoding="utf-8"?>
<s:DataGrid xmlns:fx="http://ns.adobe.com/mxml/2009"
						xmlns:s="library://ns.adobe.com/flex/spark"
						xmlns:mx="library://ns.adobe.com/flex/mx"
						xmlns:filters="it.ht.rcs.console.operations.view.evidences.filters.*"
						width="100%"
						height="100%"
						sortableColumns="false"
						variableRowHeight="true"
            doubleClickEnabled="true"
            gridClick="onGridClick(event)"
            gridDoubleClick="onGridDoubleClick(event)" 
            >
  <fx:Metadata> 
    [Event(name="dataChange", type="flash.events.Event")]
    [Event(name="itemDoubleClick", type="spark.events.GridEvent")]
  </fx:Metadata>
	<fx:Script>
		<![CDATA[
      import it.ht.rcs.console.evidence.controller.EvidenceManager;
      import it.ht.rcs.console.utils.TimeUtils;
      
      import locale.R;
      
      import mx.controls.dataGridClasses.DataGridColumn;
      
      import spark.events.GridEvent;


      
      private var lastColumnIndex:int = -1;
      private var lastRowIndex:int = -1;

			private function dateLabelFunction(item:Object, column:GridColumn):String
			{
				return TimeUtils.timestampFormatter(item[column.dataField] * 1000);
			}
      
     
      
      private function onGridClick(e:GridEvent):void
      {
        lastRowIndex = e.rowIndex;
        lastColumnIndex = e.columnIndex;
      }
      
      private function onGridDoubleClick(e:GridEvent):void
      {

      }
      
      public function scrollDown():void
      {
        //if(this.grid)
       // this.grid.ensureCellIsVisible(this.dataProvider.length-1);
      }
      private function receivedLabel(item:Object, column:GridColumn):String
      {
        if((item[column.dataField]==null || item[column.dataField]=="") && !item.rr && item.direction=="out")
          return "Unsupported"; 
        return TimeUtils.timestampFormatter(item[column.dataField] * 1000);
      }
     

      
		]]>
	</fx:Script>
	<s:columns>
		<s:ArrayList>
      
      <s:GridColumn width="100"
                    dataField="direction"
                    headerText="{R.get('DIRECTION')}"
                    resizable="false">
        
      </s:GridColumn>

      <s:GridColumn width="240"
                    dataField="sender_name"
                    headerText="{R.get('FROM')}"
                    resizable="false">
        
      </s:GridColumn>
      
      <s:GridColumn width="240"
                    dataField="rcpt_name"
                    headerText="{R.get('TO')}"
                    resizable="false">
        
      </s:GridColumn>
      
			<s:GridColumn
										dataField="sent_at"
										headerText="{R.get('SENT_AT')}" labelFunction="dateLabelFunction"
										resizable="false">
		
			</s:GridColumn>

			<s:GridColumn 
										dataField="received_at"
										headerText="{R.get('DATE_RECEIVED')}" 
										resizable="false"
										editable="false" labelFunction="receivedLabel">
      
			</s:GridColumn>
			<s:GridColumn dataField="oob_event.name"
										headerText="{R.get('OOB_EVENT')}"
										resizable="false">
       
			</s:GridColumn>
		
		</s:ArrayList>
	</s:columns>

</s:DataGrid>
